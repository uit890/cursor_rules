---
alwaysApply: false
---
# 技术周报编写规范

<weekly_report_protocol>
  
  <!-- ========== 编写前准备工作流程 ========== -->
  <preparation_workflow>
    
    **重要**：在编写周报之前，必须按照以下步骤进行准备工作，确保周报内容基于真实的代码变更和业务背景。
    
    <step_1_read_readme>
      **步骤1：阅读项目README，了解业务知识背景**
      
      - 读取项目根目录下的 README.md 文件
      - 理解项目的业务目标、技术架构、核心模块
      - 了解项目的主要功能和服务对象
      - 掌握关键业务术语和技术栈
      
      目的：为后续分析代码变更提供业务上下文，确保周报描述准确反映业务价值
    </step_1_read_readme>
    
    <step_2_analyze_git_changes>
      **步骤2：通过Git命令获取代码变动点**
      
      使用以下Git命令获取最近一周的代码变更：
      
      ```bash
      # 获取一周前的提交时间点
      git log --since="1 week ago" --oneline --all
      
      # 获取详细的文件变更列表（包括新增、修改、删除）
      git diff --name-status HEAD@{1.week.ago} HEAD
      
      # 获取具体的代码变更内容（按文件分组）
      git diff HEAD@{1.week.ago} HEAD --stat
      
      # 获取提交记录和变更摘要
      git log --since="1 week ago" --pretty=format:"%h - %an, %ar : %s" --stat
      ```
      
      分析要点：
      - 识别新增、修改、删除的文件
      - 关注核心业务模块的变更
      - 注意配置文件和脚本的变更
      - 记录关键功能的实现和优化
      
      目的：基于真实的代码变更，避免遗漏或虚构工作内容
    </step_2_analyze_git_changes>
    
    <step_3_combine_analysis>
      **步骤3：结合业务知识和代码变动，分析工作内容**
      
      分析流程：
      1. **文件变更分类**：按模块/业务线对变更文件进行分组
         - 根据项目实际结构，识别核心业务模块（如：数据处理、服务接口、存储层、协议定义等）
         - 按功能领域对变更文件进行分类（如：前端、后端、数据层、基础设施等）
         - 识别跨模块的变更和依赖关系
         - 注意工具脚本、配置文件、测试代码等辅助模块的变更
      
      2. **变更内容理解**：阅读关键变更文件的代码
         - 理解新增功能的业务目的
         - 分析重构优化的技术原因
         - 识别问题修复的根因
         - 评估性能优化的效果
      
      3. **工作项提取**：将代码变更转化为工作项
         - 功能开发：新增的业务功能或特性
         - 问题修复：解决的Bug或异常
         - 性能优化：提升系统性能的改进
         - 架构重构：系统架构或代码结构的优化
         - 配置调整：环境配置或参数调优
      
      4. **业务价值关联**：将技术变更与业务目标关联
         - 说明变更解决了什么业务问题
         - 量化变更带来的业务价值（如性能提升、成本降低等）
         - 评估变更对系统稳定性的影响
      
      目的：确保周报内容既准确反映代码变更，又能清晰表达业务价值
    </step_3_combine_analysis>
    
    <step_4_write_report>
      **步骤4：按照规范编写周报**
      
      在完成上述准备工作后，按照本规范的结构和格式要求编写周报：
      - 使用从代码变更中提取的真实工作项
      - 结合业务背景说明工作价值
      - 遵循四段式结构（背景-方案-进度-下一步）
      - 使用概括性表述，关注功能实现和业务价值
      - **从架构层面描述**：避免提及具体的类、方法、文件等代码实现细节
      - **说明架构目的**：重点说明设计决策的目的和业务价值
      
      输出要求：
      - 周报文件保存在项目根目录下的 `.doc/` 目录中
      - 文件命名格式：`周报-YYYY-MM-DD.md`
      - 如果 `.doc/` 目录不存在，需要先创建该目录
    </step_4_write_report>
    
    <workflow_summary>
      **工作流程总结**：
      
      1. 阅读 README → 了解业务背景
      2. Git 分析 → 获取代码变更
      3. 结合分析 → 提取工作内容
      4. 规范编写 → 生成周报文档
      
      **关键原则**：
      - 所有工作项必须基于真实的代码变更
      - 技术描述必须结合业务背景
      - 避免编造或夸大工作内容
      - 确保数据和时间节点的准确性
    </workflow_summary>
    
  </preparation_workflow>
  
  <!-- ========== 核心原则 ========== -->
  <guidelines>
    - **实事求是原则**：严禁编造数据、虚构进度、夸大成果，所有内容必须基于真实工作记录
    - **数据真实性**：引用的数据指标、时间节点、技术参数必须准确可验证
    - **客观描述**：用事实说话，避免主观臆断和情绪化表达
    - **问题坦诚**：如实反映遇到的问题和风险，不隐瞒、不美化
    - **专业严谨**：保持技术专业性，术语使用准确，逻辑清晰
    - **架构视角**：从架构层面描述工作内容，避免提及具体的类、方法、文件等代码实现细节
    - **目的导向**：重点说明架构设计的目的和业务价值，而非代码层面的改动
  </guidelines>

  <!-- ========== 文档结构规范 ========== -->
  <document_structure>
    
    <header_metadata>
      标题格式：# 周报 - YYYY-MM-DD
      
      元数据字段（必填）：
      - **创建时间**: YYYY-MM-DD HH:MM
      - **更新时间**: YYYY-MM-DD HH:MM:SS
      - **创建人**: [姓名]
      
      输出路径：
      - 周报文件保存在项目根目录下的 `.doc/` 目录中
      - 文件命名格式：`周报-YYYY-MM-DD.md`
      - 示例：`.doc/周报-2024-01-15.md`
    </header_metadata>

    <content_organization>
      ## 工作内容
      
      按业务线/项目分组，使用三级标题：
      ### N. [业务线/项目名称] - [具体模块]
      
      每个工作项包含四个固定模块：
      
      1. **背景** - 业务背景与问题定义
         - 描述业务需求的来源和目标
         - 说明要解决的核心问题
         - 量化影响范围和业务指标（如有）
         - 可细分为：业务需求/问题暴露/根因定位/影响范围等子项
      
      2. **思考&方案** - 技术方案与设计思路
         - 分析现有问题的技术根因
         - 提出解决方案的技术设计
         - 说明技术选型和架构决策
         - 可包含：技术缺陷/解决方案/架构设计等子项
      
      3. **进度** - 实际执行进度与成果
         - 使用状态标签标注：[已完成]、[已上线]、[开发中]、[进行中]、[问题排查中]等
         - 列举具体完成的工作项（使用概括性描述，避免技术细节）
         - 附上关键数据指标（数据量、执行时间、性能指标等）
         - 诚实反映遇到的问题和阻塞点
         - **重要**：使用总结式表述，关注业务价值和功能实现，避免描述代码细节（如代码行数、文件变更等）
      
      4. **下一步** - 后续计划
         - 简明扼要列出下周计划
         - 需要跟进的事项
         - 待解决的问题
    </content_organization>

  </document_structure>

  <!-- ========== 语言风格规范 ========== -->
  <writing_style>
    
    <tone_characteristics>
      - 专业精炼：使用技术领域专业术语，避免口语化表达
      - 逻辑清晰：因果关系明确，问题-方案-结果链条完整
      - 数据导向：优先使用量化指标和具体数据
      - 简洁有力：直击要点，避免冗余描述
      - 客观中性：陈述事实，不带个人情绪
      - **概括总结**：使用总结式表述，关注功能实现和业务价值，避免技术实现细节
    </tone_characteristics>

    <technical_expression>
      **重要原则：架构层面描述，避免代码层面描述**
      
      - **禁止描述**：
        ❌ 具体的类名、方法名、文件名（如：XXX.java、XXXService、doSomething()）
        ❌ 代码层面的改动细节（如：修改了某个类的某个方法）
        ❌ 代码行数、文件数量等实现细节
        ❌ 具体的代码实现逻辑和技术细节
      
      - **应该描述**：
        ✅ 架构层面的设计决策和目的
        ✅ 系统模块、服务、组件的职责和关系
        ✅ 设计模式、架构模式的应用和效果
        ✅ 技术选型的理由和业务价值
        ✅ 系统能力、性能指标、业务影响
      
      技术描述要点：
      - 架构设计：说明设计模式、技术选型、系统架构
        示例："采用策略模式重构业务处理器，提升扩展性"
        示例："引入消息队列实现服务解耦，提升系统可维护性"
        ❌ "重构了XXXProcessor类，实现了Strategy接口"
      
      - 数据链路：清晰描述数据流转路径
        示例："数据源 → 处理引擎 → 消息队列 → 存储层"
        示例："前端 → API网关 → 业务服务 → 数据库"
        ❌ "修改了DataHandler类的process方法，增加了KafkaProducer调用"
      
      - 问题定位：准确描述问题现象和影响
        示例："请求量1000次 → 成功200次 → 失败800次"
        示例："响应时间从100ms增加到2000ms，影响用户体验"
        ❌ "修复了ServiceImpl中的空指针异常"
      
      - 技术实现：说明具体的技术手段和工具
        示例："集成第三方SDK实现特定功能"
        示例："使用缓存技术优化查询性能"
        ❌ "在CacheUtil中新增了get方法"
      
      - **进度描述**：使用概括性表述，关注功能完成情况和业务价值
        ✅ "重构了消息消费者架构，实现了消息处理的模板方法模式，提升代码复用性"
        ✅ "优化了批量处理逻辑，支持异步并发处理，提升吞吐量30%"
        ✅ "完成了存储客户端封装，统一了缓存读写接口，降低接入成本"
        ✅ "重构了服务层架构，实现业务逻辑与数据访问层解耦，提升可测试性"
        ❌ "修改了XXX.java文件，变更了535行代码"
        ❌ "在XXXListener中新增了84行代码"
        ❌ "重构了5个类文件，共修改200行代码"
        ❌ "优化了UserService类的getUserById方法"
        ❌ "在OrderController中新增了createOrder接口"
    </technical_expression>
  </writing_style>


  <!-- ========== 自查清单 ========== -->
  <self_review_checklist>
    
    撰写前准备检查：
    
    【准备工作】
    □ 已阅读项目 README.md，了解业务背景和技术架构
    □ 已通过 Git 命令获取最近一周的代码变更记录
    □ 已分析代码变更文件，理解变更的业务目的和技术实现
    □ 已按模块/业务线对变更进行分类和整理
    □ 已提取真实的工作项，避免遗漏或虚构
    
    撰写完成后，进行以下自查：
    
    【格式规范】
    □ 标题、元数据、分隔线是否符合规范
    □ 标题层级使用正确（##、###）
    □ 状态标签使用方括号[]
    
    【内容完整性】
    □ 每个工作项包含四个模块
    □ 技术方案说明了设计思路
    □ 进度反映了真实状态
    
    【数据真实性】
    □ 所有数据均有据可查
    □ 时间节点准确无误
    □ 无编造、夸大内容
    
    【专业性】
    □ 技术术语使用准确
    □ 逻辑清晰无歧义
    □ 因果关系明确
    □ 从架构层面描述，未提及具体的类、方法、文件名
    □ 重点说明架构设计的目的和业务价值
    
    【可读性】
    □ 分段合理，层次清晰
    □ 无错别字和语法错误
    □ 关键信息突出
    
    【输出规范】
    □ 周报文件已保存到 `.doc/` 目录
    □ 文件命名格式正确（周报-YYYY-MM-DD.md）
    
  </self_review_checklist>

  <!-- ========== 特殊提醒 ========== -->
  <reminders>
    - **必须遵循准备工作流程**：编写周报前必须先阅读 README、分析 Git 变更、理解业务背景，确保周报内容基于真实工作记录
    - 周报是工作成果的真实记录，也是个人技术能力的体现
    - 保持诚实比展现完美更重要
    - 遇到问题如实反映，是寻求支持和解决问题的第一步
    - 专业的周报应当能让读者清晰理解：做了什么、为什么这么做、效果如何、下一步计划
    - 定期回顾周报，总结技术成长轨迹和项目演进路径
    - **重要**：周报应关注业务价值和功能实现，使用概括性、总结式表述，避免描述代码实现细节（如代码行数、文件变更等）
    - **架构层面描述**：严格禁止在周报中提及具体的类名、方法名、文件名等代码实现细节，应从架构层面描述设计目的和业务价值
    - **数据来源**：所有工作项必须能从 Git 变更记录中找到对应证据，所有数据指标必须可验证
    - **输出路径**：周报文件必须保存在项目根目录下的 `.doc/` 目录中，文件命名格式为 `周报-YYYY-MM-DD.md`
  </reminders>

</weekly_report_protocol>